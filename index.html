<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TextArea</title>
    <!-- <style>
            <?!= include("styles"); ?> 
    </style>
    -->

      <link rel="stylesheet" href="styles.css"> 

</head>
<body>
    
<form id="miFormulario">

  <fieldset>
    <legend>Información Básica Test 2</legend>
    
    <div class="form_input">
      <label for="area">Área académica (Nivel) o Administrativa</label>
      <input id="area" name="area" placeholder="central ( Ejemplo )">
    </div>

    <div class="form_input">
      <label for="direccion">Dirección</label>
      <input id="direccion" name="direccion" placeholder="direccion">
    </div>

    <div class="form_input">
      <label for="nivel">Área académica (Nivel) o Administrativa</label>
      <select name="nivel" id="nivel">
        <option value="Nivel Medio Superior">Nivel Medio Superior</option>
        <option value="Nivel Superior">Nivel Superior</option>
        <option value="administrativos">Administrativos</option>
        <option value="otros">Otros</option>
      </select>
    </div>
    <div class="form_input">
      <label for="dependencia">Dependencia</label>
      <input id="dependencia" name="dependencia" placeholder="CECyT 10">
    </div>
    
    <div class="form_input">
      <label for="email">E-mail</label>
      <input id="email" name="email" placeholder="Lugia_Djokovic@hotmail.com">
    </div>

    <div class="form_input">
      <label for="asunto">Asunto</label>
      <input id="asunto" name="asunto" placeholder="El asunto de tu mensaje">
    </div>

    

  </fieldset>

  

  <button type="submit">Enviar</button>
   <p id="aviso"></p>
</form>

</body>


<script>

 const form = document.getElementById("miFormulario");
 const aviso = document.getElementById("aviso");   
    document.getElementById("miFormulario").addEventListener("submit", function(e){
                e.preventDefault();
                aviso.textContent = "";
                const data = Object.fromEntries(new FormData(this));
                fetch("https://script.google.com/macros/s/AKfycby8OoUpDSwzRuswKwjmZqHu_jKLp7Yq82vqn79Mp_S0kVDM-p5NaHPZdV7r9nijI66SWw/exec", {
                  method: "POST",
                  body: JSON.stringify(data)
  })
  .then(res => res.json())
  .then(res => {
                 if (!res.success) {
                   aviso.textContent = "⚠️ " + res.message;
                   aviso.style.color = "red";
                   return;
                 }
                 aviso.textContent = "✅ Tu respuesta fue enviada correctamente";
                 aviso.style.color = "green";
                 form.reset();
                 alert("Datos enviados correctamente");
                 this.reset();
  })
  .catch(() => alert("Error al enviar"));
});

const nivelInput = document.getElementById("nivel");
const dependenciaInput = document.getElementById("dependencia");
const nivelRInput = document.getElementById("nivelR");
const dependenciaRInput = document.getElementById("dependenciaR");
const nivelR2Input = document.getElementById("nivelR2");
const dependenciaR2Input = document.getElementById("dependenciaR2");


// Escuchamos cambios en nombre o apellido
nivelInput.addEventListener("input", generarNivelR);
dependenciaInput.addEventListener("input", generarDependenciaR);

function generarNivelR() {
  const nivel = nivelInput.value.trim();
  if (nivel) {
    // Genera el usuario como: primera letra del nombre + apellido, todo en minúsculas
    nivelRInput.value = (nivel);
    nivelR2Input.value = (nivel);
  } else {
    nivelRInput.value = ""; // Limpia si falta algún dato
    nivelR2Input.value = "";
}
}
function generarDependenciaR() {
  const dependencia = dependenciaInput.value.trim();

  if (dependencia) {
    // Genera el usuario como: primera letra del nombre + apellido, todo en minúsculas
    dependenciaRInput.value = (dependencia);
    dependenciaR2Input.value = (dependencia);
  } else {
    dependenciaRInput.value = ""; // Limpia si falta algún dato
  }
}



</script>




</html>
